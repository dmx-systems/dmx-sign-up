<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">

    <head>
        <meta charset="utf-8"></meta>
        <title th:text="'Edit Account - ' + ${title}">Account Details</title>
        <link rel="stylesheet"  th:href="${css_path}" type="text/css" />
        <script type="text/javascript" src="/de.deepamehta.accesscontrol/script/vendor/sha256.js"></script>
        <script type="text/javascript" src="/org.deepamehta.sign-up/script/sign-up.js" />
        <script th:inline="javascript">
        /*<![CDATA[*/
            signupConfig.customWorkspaceEnabled = /*[[${custom_workspace_enabled}]]*/ false;
            signupConfig.customWorkspaceURI = /*[[${custom_workspace_uri}]]*/ '';
            signupConfig.appLoadingMessage = /*[[${loading_app_hint}]]*/ 'Loading Webclient';
            signupConfig.appLoggingOutHint = /*[[${logging_out_hint}]]*/ 'Logging out..';
            signupConfig.appStartPageURL = /*[[${start_url}]]*/ '/';
        /*]]>*/
        </script>
    </head>

    <body class="account-page sign-up">

        <div class="top-menu" th:include="fragments/navigation :: top (publisher=${is_publisher})"></div>

        <div id="page-header">
            <span class="project-title" th:text="'Your Account on ' + ${title}">Your Account</span>
        </div>

        <p>&nbsp;</p>

        <div class="dialog-body">
            <h2>Infos associated with your username</h2>
            <form class="account-edit-form" action="javascript:voidFunction();" onsubmit="javascript:saveAccountEdits()">
                <!--label for="username">Username</label-->
                <input id="username" disabled="true" type="text" th:value="${username}" name="username" class="custom-ws-up username" />
                <!-- Adapt Mailbox -->
                <input type="text" disabled="true" id="mailbox" name="mailbox" th:value="${email}" class="sign-up mailbox" />
                <div id="message-view"><span id="message"></span></div>
                <!--input type="submit" id="update" value="Save" disabled="true" class="sign-up ok" /-->
            </form>
            <div th:if="${!#strings.isEmpty(link)}">
                <p>
                    <a class="button" th:href="${link}">Please log in first</a>
                </p>
            </div>
            <form th:if="${logged_in}" class="logout-form" action="javascript:doLogout()">
                <input type="submit" th:value="${logout}" class="ok sign-up" />
            </form>
        </div>

        <div th:if="${custom_workspace_enabled} and ${logged_in}" id="custom-ws-text" class="dialog-body">
            <h2 th:text="${api_option_title}">Aktivierung der API Option</h2>
            <p th:utext="${api_option_descr}">
                To be able to use our API access please take your time and read the special <i>Terms of service</i> for the API.
                If you've understood the following terms of service please confirm through checking the following box.
            </p>
            <form name="custom-aggreement" action="javascript:voidFunction();">
                <input id="custom-ws-check" type="checkbox" th:checked="${api_workspace_member}"
                       onclick="javascript:doCheckCustomWorkspaceAggrement()" class="tos-check"></input>
                <label for="custom-ws-check" th:utext="${custom_workspace_description}">I also agree with the custom workspace <i>Terms of use</i>.</label>
                <a href="javascript:showCustomWorkspaceTermsText()" title="Read Details">Read more</a><br/>
                <div id="custom-ws-info" th:utext="${custom_workspace_details}"></div>
                <div id="message-view"><span id="message"></span></div>
            </form>
            <p th:utext="${api_option_revoke}"></p>
            <p th:if="${!#strings.isEmpty(api_email_contact)}">
                <span th:text="${api_contact_revoke}"></span> <a href="'mailto:' + ${api_email_contact}" th:text="${api_email_contact}"></a>
            </p>
            <p th:if="${#strings.isEmpty(api_email_contact)}" class="warning">
                Notice: Please configure the option "System Recipient Mailbox" in your current <em>Sign-up Plugin Configuration</em>.
            </p>
        </div>

        <div id="page-footer" th:utext="${footer}">
        </div>

    </body>

    <noscript>
        Without JavaScript we can not check if your desired username is already taken and we cannot check in advance
        if your chosen password meets our requirements (minimum of 8 characters).
        Thus, your account creation may just silently fail. Thanks for your understanding.
    </noscript>

</html>
